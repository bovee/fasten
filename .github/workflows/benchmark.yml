on: 
  push:
    branches: [master,benchmarking]


name: benchmarking

jobs:
  build_and_test:
    name: Benchmark with ${{matrix.os}} and python ${{ matrix.python-version }}
    runs-on: ${{matrix.os}}
    strategy:
      matrix:
        os: ["ubuntu-latest"]
        python-version: ["3.7"]
    steps:
      - uses: actions/checkout@v2
      - uses: conda-incubator/setup-miniconda@v2
        with:
          python-version: ${{ matrix.python-version }}
          mamba-version: "*"
          channels: bioconda,conda-forge,defaults
      - run: conda install seqkit
      - name: env
        run:  |
          which seqkit
      - uses: actions-rs/toolchain@v1
        with:
          toolchain: stable
      - uses: actions-rs/cargo@v1
        with:
          command: build
          args: --release --all-features
      - name: benchmark
        run:  |
          bash tests/10_benchmark.sh


